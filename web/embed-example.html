<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quality Widget Integration Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
        }
        
        h2 {
            color: #4CAF50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        
        .video-container {
            position: relative;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        video {
            width: 100%;
            height: 400px;
            display: block;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .feature-card h3 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #45a049;
        }
        
        .integration-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .option-card {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
        }
        
        .option-card.recommended {
            border-color: #4CAF50;
            background: #f8fff8;
        }
    </style>
</head>
<body>
    <h1>üé¨ StreamForge Quality Widget Integration</h1>
    
    <div class="demo-section">
        <h2>üì∫ Live Demo</h2>
        <p>This example shows how to add quality indicators to any video player:</p>
        
        <div class="video-container">
            <!-- Example with auto-initialization using data attributes -->
            <video 
                id="demoVideo" 
                controls 
                data-quality-widget
                data-position="top-right"
                data-theme="dark"
                poster="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='400'%3E%3Crect width='100%25' height='100%25' fill='%23333'/%3E%3Ctext x='50%25' y='50%25' fill='white' text-anchor='middle' dy='.3em' font-family='Arial' font-size='24'%3EStreamForge Demo%3C/text%3E%3C/svg%3E">
                <source src="http://localhost:3001/hls/stream1/master.m3u8" type="application/x-mpegURL">
                Your browser does not support the video tag.
            </video>
        </div>
        
        <div style="text-align: center; margin: 20px 0;">
            <button onclick="loadDemo('stream1')">üì∫ Load Stream1</button>
            <button onclick="loadDemo('stream2')">üì∫ Load Stream2</button>
            <button onclick="simulateQuality('1080p')">üéØ Simulate 1080p</button>
            <button onclick="simulateQuality('720p')">üéØ Simulate 720p</button>
            <button onclick="simulateQuality('480p')">üéØ Simulate 480p</button>
        </div>
    </div>
    
    <div class="demo-section">
        <h2>üöÄ Quick Integration Options</h2>
        
        <div class="integration-options">
            <div class="option-card recommended">
                <h3>‚ú® Auto-Initialize (Recommended)</h3>
                <p>Just add data attributes to your video element:</p>
                <div class="code-block">&lt;video id="myVideo" 
       data-quality-widget
       data-position="top-right"
       data-theme="dark"&gt;
&lt;/video&gt;

&lt;script src="quality-widget.js"&gt;&lt;/script&gt;</div>
            </div>
            
            <div class="option-card">
                <h3>‚öôÔ∏è Manual Initialization</h3>
                <p>For more control over the widget:</p>
                <div class="code-block">&lt;script src="quality-widget.js"&gt;&lt;/script&gt;
&lt;script&gt;
const widget = new QualityWidget('myVideo', {
    position: 'top-right',
    theme: 'dark',
    autoDetect: true
});
&lt;/script&gt;</div>
            </div>
        </div>
    </div>
    
    <div class="demo-section">
        <h2>üéõÔ∏è Widget Features</h2>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h3>üìä Quality Detection</h3>
                <p>Automatically detects and displays current video quality (1080p, 720p, 480p, 360p)</p>
            </div>
            
            <div class="feature-card">
                <h3>üìà Bandwidth Display</h3>
                <p>Shows estimated bandwidth usage for each quality level</p>
            </div>
            
            <div class="feature-card">
                <h3>üì± Responsive Design</h3>
                <p>Works on desktop, tablet, and mobile devices</p>
            </div>
            
            <div class="feature-card">
                <h3>üé® Customizable</h3>
                <p>Multiple themes, positions, and display options</p>
            </div>
            
            <div class="feature-card">
                <h3>‚ö° Real-time Updates</h3>
                <p>Updates automatically when video quality changes</p>
            </div>
            
            <div class="feature-card">
                <h3>üîß Easy Integration</h3>
                <p>Works with any HTML5 video player or streaming solution</p>
            </div>
        </div>
    </div>
    
    <div class="demo-section">
        <h2>üìù Configuration Options</h2>
        
        <div class="code-block">const widget = new QualityWidget('videoId', {
    position: 'top-right',    // 'top-right', 'top-left', 'bottom-right', 'bottom-left'
    theme: 'dark',           // 'dark' or 'light'
    autoDetect: true,        // Auto-detect quality from video resolution
    showBandwidth: true,     // Show bandwidth information
    showResolution: true     // Show resolution information
});

// Manual quality updates
widget.showQuality('1080p', '5.0 Mbps', '1920x1080');

// Change theme or position dynamically
widget.setTheme('light');
widget.setPosition('bottom-left');</div>
    </div>
    
    <div class="demo-section">
        <h2>üåü Integration Examples</h2>
        
        <h3>For StreamForge Users:</h3>
        <div class="code-block">&lt;!-- Your existing video player --&gt;
&lt;video id="streamPlayer" controls&gt;
    &lt;source src="http://localhost:8085/hls/stream1/master.m3u8" type="application/x-mpegURL"&gt;
&lt;/video&gt;

&lt;!-- Add quality widget --&gt;
&lt;script src="quality-widget.js"&gt;&lt;/script&gt;
&lt;script&gt;
    const qualityWidget = new QualityWidget('streamPlayer');
&lt;/script&gt;</div>
        
        <h3>For Video.js Integration:</h3>
        <div class="code-block">&lt;script&gt;
// Initialize Video.js player
const player = videojs('my-player');

// Add quality widget
const qualityWidget = new QualityWidget('my-player', {
    position: 'top-right',
    theme: 'dark'
});

// Update quality when Video.js changes quality
player.on('qualitychange', function() {
    // Your quality detection logic here
    qualityWidget.showQuality('720p', '2.8 Mbps', '1280x720');
});
&lt;/script&gt;</div>
        
        <h3>For HLS.js Integration:</h3>
        <div class="code-block">&lt;script&gt;
// Initialize HLS.js
const hls = new Hls();
hls.loadSource('your-stream.m3u8');
hls.attachMedia(video);

// Add quality widget
const qualityWidget = new QualityWidget('myVideo');

// Listen for quality changes
hls.on(Hls.Events.LEVEL_SWITCHED, function (event, data) {
    const level = hls.levels[data.level];
    qualityWidget.showQuality(
        `${level.height}p`,
        `${(level.bitrate / 1000000).toFixed(1)} Mbps`,
        `${level.width}x${level.height}`
    );
});
&lt;/script&gt;</div>
    </div>

    <!-- Include the quality widget script -->
    <script src="quality-widget.js"></script>
    
    <script>
        // Demo functions
        function loadDemo(streamName) {
            const video = document.getElementById('demoVideo');
            video.src = `http://localhost:3001/hls/${streamName}/master.m3u8`;
            video.load();
        }
        
        function simulateQuality(quality) {
            // Find the widget for the demo video (auto-created by data attributes)
            // This is just for demonstration - in real use, quality is detected automatically
            const qualityMappings = {
                '1080p': { bandwidth: '5.0 Mbps', resolution: '1920x1080' },
                '720p': { bandwidth: '2.8 Mbps', resolution: '1280x720' },
                '480p': { bandwidth: '1.4 Mbps', resolution: '854x480' },
                '360p': { bandwidth: '0.8 Mbps', resolution: '640x360' }
            };
            
            const mapping = qualityMappings[quality];
            if (mapping) {
                // This is a demo simulation - normally quality is auto-detected
                alert(`Simulating ${quality} quality!\n\nIn real usage, the widget automatically detects:\n‚Ä¢ Quality: ${quality}\n‚Ä¢ Bandwidth: ${mapping.bandwidth}\n‚Ä¢ Resolution: ${mapping.resolution}`);
            }
        }
        
        // Show instructions
        setTimeout(() => {
            alert('üé¨ Quality Widget Demo\n\n1. Click "Load Stream1" to test with a real stream\n2. The quality indicator appears in the top-right corner\n3. Click the indicator to see detailed information\n4. Quality updates automatically based on video resolution');
        }, 1000);
    </script>
</body>
</html>